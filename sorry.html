<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Sorry Panda</title>
    <!-- Tailwind CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React + ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX in the browser (dev) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      @keyframes float { 0%,100%{ transform: translateY(0px) rotate(0deg);} 50%{ transform: translateY(-20px) rotate(10deg);} }
      @keyframes heartExplode { 0%{ transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity:1 } 100%{ transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1) rotate(360deg); opacity:0 } }
      .animate-float { animation: float 3s ease-in-out infinite; }
      .animate-heartExplode { animation: heartExplode 2s ease-out forwards; }
      body { touch-action: manipulation; }
    </style>
  </head>
  <body class="antialiased overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      function PandaApology() {
        const [forgiven, setForgiven] = useState(false);
        const [noButtonPos, setNoButtonPos] = useState({ x: 0, y: 0 });
        const [attempts, setAttempts] = useState(0);
        const [isHugging, setIsHugging] = useState(false);
        const [showHearts, setShowHearts] = useState(false);
        const [windowWidth, setWindowWidth] = useState(window.innerWidth);

        useEffect(() => {
          const handleResize = () => setWindowWidth(window.innerWidth);
          window.addEventListener('resize', handleResize);
          return () => window.removeEventListener('resize', handleResize);
        }, []);

        const handleNoHover = () => {
          const maxX = Math.min(window.innerWidth / 2.5, 150);
          const maxY = Math.min(window.innerHeight / 3, 100);
          const randomX = Math.random() * maxX * 2 - maxX;
          const randomY = Math.random() * maxY * 2 - maxY;
          setNoButtonPos({ x: randomX, y: randomY });
          setAttempts((a) => a + 1);
        };

        const handleForgive = () => {
          setIsHugging(true);
          setShowHearts(true);
          setTimeout(() => {
            setForgiven(true);
          }, 800);
        };

        useEffect(() => {
          if (attempts >= 8) handleForgive();
        }, [attempts]);

        const isMobile = windowWidth < 640;
        const isTablet = windowWidth >= 640 && windowWidth < 1024;

        return (
          <div className="flex items-center justify-center min-h-screen bg-gradient-to-b from-pink-100 via-purple-100 to-blue-100 overflow-hidden relative w-full">
            <div className="absolute inset-0 pointer-events-none overflow-hidden">
              {[...Array(isMobile ? 8 : 20)].map((_, i) => (
                <div
                  key={i}
                  className="absolute text-lg sm:text-xl animate-float"
                  style={{
                    left: `${Math.random() * 100}%`,
                    top: `${Math.random() * 100}%`,
                    animationDelay: `${i * 0.5}s`,
                    animationDuration: `${3 + Math.random() * 2}s`,
                  }}
                >{['ðŸ’–','ðŸ’•','ðŸ’—','ðŸ’“'][i % 4]}</div>
              ))}
            </div>

            {!forgiven ? (
              <div className="relative z-10 text-center max-w-xl mx-auto px-3 sm:px-4 w-full">
                <div className="mb-4 sm:mb-6 p-3 sm:p-4 bg-white/80 rounded-xl sm:rounded-2xl shadow-lg border-2 border-purple-200">
                  <p className="text-purple-700 font-semibold text-sm sm:text-base md:text-lg">
                    {attempts === 0 && "I'm really sorry... Will you forgive me? ðŸ¥º"}
                    {attempts === 1 && "Please don't stay mad... I miss you! ðŸ’”"}
                    {attempts === 2 && "Your friendship means everything to me! ðŸŒŸ"}
                    {attempts === 3 && "I promise I'll be better! Pinky promise! ðŸ¤ž"}
                    {attempts === 4 && "Life without you is so boring... ðŸ˜¢"}
                    {attempts === 5 && "I'll buy you ice cream! ðŸ¦"}
                    {attempts === 6 && "Please please please... ðŸ¥ºðŸ¥ºðŸ¥º"}
                    {attempts === 7 && "Okay, I understand if you need time... ðŸ’«"}
                    {attempts >= 8 && "You're my best friend forever! ðŸ’–"}
                  </p>
                </div>

                <div className={`flex ${isMobile ? 'flex-col' : 'flex-row'} justify-between items-end ${isMobile ? 'gap-4' : 'gap-8'} mb-6 sm:mb-8 px-2 sm:px-8`}>
                  <div className={`relative transition-all duration-500 ${attempts > 0 ? 'animate-bounce' : ''} ${isMobile ? 'w-full' : ''}`}>
                    <div className="absolute -top-2 left-1/2 transform -translate-x-1/2 z-20">
                      {attempts > 2 && <span className="text-blue-300 text-lg sm:text-xl animate-pulse">ðŸ’§</span>}
                      {attempts > 4 && <span className="text-blue-300 text-lg sm:text-xl animate-pulse ml-2">ðŸ’§</span>}
                    </div>

                    <div className="relative w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 bg-white rounded-full mx-auto shadow-xl border-4 border-gray-200">
                      <div className="absolute -top-2 sm:-top-3 left-2 sm:left-4 w-5 sm:w-7 h-5 sm:h-7 bg-black rounded-full"></div>
                      <div className="absolute -top-2 sm:-top-3 right-2 sm:right-4 w-5 sm:w-7 h-5 sm:h-7 bg-black rounded-full"></div>
                      <div className={`absolute top-6 sm:top-8 left-3 sm:left-5 w-5 sm:w-6 h-5 sm:h-7 bg-black rounded-full ${attempts > 1 ? 'rotate-45' : ''}`}></div>
                      <div className={`absolute top-6 sm:top-8 right-3 sm:right-5 w-5 sm:w-6 h-5 sm:h-7 bg-black rounded-full ${attempts > 1 ? '-rotate-45' : ''}`}></div>
                      <div className="absolute top-7 sm:top-9 left-4 sm:left-6 w-2 sm:w-3 h-2 sm:h-3 bg-white rounded-full"></div>
                      <div className="absolute top-7 sm:top-9 right-4 sm:right-6 w-2 sm:w-3 h-2 sm:h-3 bg-white rounded-full"></div>
                      <div className={`absolute top-12 sm:top-16 left-1/2 transform -translate-x-1/2 ${attempts < 3 ? 'w-5 sm:w-6 h-2 sm:h-3 border-b-4 border-black rounded-full' : attempts < 6 ? 'w-3 sm:w-4 h-0.5 sm:h-1 bg-black' : 'w-6 sm:w-8 h-3 sm:h-4 border-b-4 border-black rounded-full animate-pulse'}`}></div>
                    </div>

                    <div className={`w-18 sm:w-24 h-16 sm:h-20 bg-white rounded-2xl mx-auto mt-2 sm:mt-3 shadow-lg border-4 border-gray-200 ${attempts > 5 ? 'animate-pulse' : ''}`}></div>
                    <div className="absolute top-10 sm:top-12 -left-2 sm:-left-4 w-3 sm:w-4 h-12 sm:h-16 bg-black rounded-full transform -rotate-45"></div>
                    <div className="absolute top-10 sm:top-12 -right-2 sm:-right-4 w-3 sm:w-4 h-12 sm:h-16 bg-black rounded-full transform rotate-45"></div>
                    <div className="absolute -bottom-6 sm:-bottom-8 left-1/2 transform -translate-x-1/2 bg-blue-100 px-2 sm:px-3 py-1 rounded-lg border-2 border-blue-300">
                      <p className="text-blue-600 text-xs sm:text-sm font-bold">Sorry Panda</p>
                    </div>
                  </div>

                  <div className={`relative transition-all duration-500 ${attempts > 6 ? 'animate-bounce' : ''} ${isMobile ? 'w-full' : ''}`}>
                    <div className="relative w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 bg-white rounded-full mx-auto shadow-xl border-4 border-pink-200">
                      <div className="absolute -top-2 sm:-top-3 left-2 sm:left-4 w-5 sm:w-7 h-5 sm:h-7 bg-black rounded-full"></div>
                      <div className="absolute -top-2 sm:-top-3 right-2 sm:right-4 w-5 sm:w-7 h-5 sm:h-7 bg-black rounded-full"></div>
                      <div className="absolute top-6 sm:top-8 left-3 sm:left-5 w-5 sm:w-6 h-5 sm:h-7 bg-black rounded-full"></div>
                      <div className="absolute top-6 sm:top-8 right-3 sm:right-5 w-5 sm:w-6 h-5 sm:h-7 bg-black rounded-full"></div>
                      <div className="absolute top-7 sm:top-9 left-4 sm:left-6 w-2 sm:w-3 h-2 sm:h-3 bg-white rounded-full"></div>
                      <div className="absolute top-7 sm:top-9 right-4 sm:right-6 w-2 sm:w-3 h-2 sm:h-3 bg-white rounded-full"></div>
                      <div className={`absolute top-12 sm:top-16 left-1/2 transform -translate-x-1/2 ${attempts < 4 ? 'w-5 sm:w-6 h-0.5 sm:h-1 bg-black rotate-45' : attempts < 7 ? 'w-3 sm:w-4 h-0.5 sm:h-1 bg-black' : 'w-5 sm:w-6 h-2 sm:h-3 border-b-4 border-black rounded-full'}`}></div>

                      {attempts > 5 && (
                        <>
                          <div className="absolute top-12 sm:top-14 -left-1 sm:-left-2 w-2 sm:w-3 h-1.5 sm:h-2 bg-pink-200 rounded-full"></div>
                          <div className="absolute top-12 sm:top-14 -right-1 sm:-right-2 w-2 sm:w-3 h-1.5 sm:h-2 bg-pink-200 rounded-full"></div>
                        </>
                      )}
                    </div>
                    <div className="w-18 sm:w-24 h-16 sm:h-20 bg-white rounded-2xl mx-auto mt-2 sm:mt-3 shadow-lg border-4 border-pink-200"></div>
                    <div className={`absolute top-10 sm:top-12 -left-2 sm:-left-4 w-3 sm:w-4 h-12 sm:h-12 bg-black rounded-full ${attempts < 5 ? 'transform -rotate-45' : 'transform rotate-45'}`}></div>
                    <div className={`absolute top-10 sm:top-12 -right-2 sm:-right-4 w-3 sm:w-4 h-12 sm:h-12 bg-black rounded-full ${attempts < 5 ? 'transform rotate-45' : 'transform -rotate-45'}`}></div>
                    <div className="absolute -bottom-6 sm:-bottom-8 left-1/2 transform -translate-x-1/2 bg-pink-100 px-2 sm:px-3 py-1 rounded-lg border-2 border-pink-300">
                      <p className="text-pink-600 text-xs sm:text-sm font-bold">Best Friend</p>
                    </div>
                  </div>
                </div>

                <div className={`flex ${isMobile ? 'flex-col gap-3' : 'gap-4 sm:gap-6'} justify-center items-center relative ${isMobile ? 'min-h-auto' : 'min-h-20'} px-2`}>
                  <button onClick={handleForgive} className="w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-green-400 to-emerald-400 text-white font-bold rounded-xl sm:rounded-2xl shadow-2xl transition-all transform hover:scale-105 sm:hover:scale-110 active:scale-95 border-4 border-green-500 text-sm sm:text-lg z-10">
                    Yes! I Forgive You! ðŸ’š
                  </button>

                  <button
                    onMouseEnter={handleNoHover}
                    onTouchStart={handleNoHover}
                    onClick={handleNoHover}
                    style={{ 
                      transform: `translate(${noButtonPos.x}px, ${noButtonPos.y}px) scale(${Math.max(0.4, 1 - attempts * 0.1)})`, 
                      transition: 'all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)', 
                      opacity: Math.max(0.3, 1 - attempts * 0.1) 
                    }}
                    className="w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-red-400 to-pink-400 text-white font-bold rounded-xl sm:rounded-2xl shadow-lg border-4 border-red-500 text-sm sm:text-lg relative z-0"
                  >
                    {attempts < 3 && "No way! ðŸ˜ "}
                    {attempts >= 3 && attempts < 6 && "Still no! ðŸ™…â€â™€ï¸"}
                    {attempts >= 6 && "Hmm... ðŸ¤”"}
                  </button>
                </div>

                {attempts > 0 && (
                  <div className="mt-4 sm:mt-6 bg-white/50 rounded-full p-2 max-w-md mx-auto mx-2">
                    <div className="flex items-center justify-between text-xs sm:text-sm text-purple-600">
                      <span>Friendship Meter:</span>
                      <span>{Math.min(100, attempts * 15)}%</span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-2 mt-1">
                      <div className="bg-gradient-to-r from-purple-400 to-pink-400 h-2 rounded-full transition-all duration-500" style={{ width: `${Math.min(100, attempts * 15)}%` }}></div>
                    </div>
                  </div>
                )}

                {attempts >= 5 && (
                  <p className="text-purple-600 text-xs sm:text-sm mt-3 sm:mt-4 italic animate-pulse px-2">
                    {attempts < 8 ? "The panda won't give up! Keep trying! ðŸ¼ðŸ’ª" : "Aww... you're melting my heart! ðŸ’–"}
                  </p>
                )}
              </div>
            ) : (
              <div className="relative z-10 text-center max-w-2xl mx-auto px-3 sm:px-4 w-full">
                <div className="relative mb-6 sm:mb-8 h-32 sm:h-40 flex justify-center items-center">
                  {[...Array(isMobile ? 8 : 15)].map((_, i) => (
                    <div key={i} className="absolute w-2 sm:w-3 h-2 sm:h-3 bg-yellow-300 rounded-full animate-ping" style={{ left: `${40 + 30 * Math.cos((i * Math.PI) / (isMobile ? 4 : 7.5))}%`, top: `${50 + 30 * Math.sin((i * Math.PI) / (isMobile ? 4 : 7.5))}%`, animationDelay: `${i * 0.1}s` }} />
                  ))}

                  <div className={`flex ${isMobile ? 'flex-col' : 'flex-row'} items-center justify-center transition-all duration-1000 ${isHugging ? 'scale-110' : 'scale-100'} ${isMobile ? 'gap-2' : ''}`}>
                    <div className="relative animate-bounce" style={{ animationDuration: '1.2s' }}>
                      <div className="relative w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 bg-white rounded-full shadow-2xl border-4 border-blue-200">
                        <div className="absolute -top-3 sm:-top-4 left-3 sm:left-5 w-6 sm:w-8 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute -top-3 sm:-top-4 right-3 sm:right-5 w-6 sm:w-8 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute top-8 sm:top-10 left-5 sm:left-7 w-6 sm:w-7 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute top-8 sm:top-10 right-5 sm:right-7 w-6 sm:w-7 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute top-9 sm:top-11 left-6 sm:left-8 w-3 sm:w-4 h-3 sm:h-4 bg-white rounded-full"></div>
                        <div className="absolute top-9 sm:top-11 right-6 sm:right-8 w-3 sm:w-4 h-3 sm:h-4 bg-white rounded-full"></div>
                        <div className="absolute top-16 sm:top-18 left-1/2 transform -translate-x-1/2 w-6 sm:w-8 h-3 sm:h-4 border-b-4 border-black rounded-full"></div>
                      </div>
                      <div className="w-20 sm:w-28 h-20 sm:h-24 bg-white rounded-2xl mx-auto -mt-2 shadow-xl border-4 border-blue-200"></div>
                    </div>

                    <div className="relative animate-bounce" style={{ animationDuration: '1.2s', animationDelay: '0.3s' }}>
                      <div className="relative w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 bg-white rounded-full shadow-2xl border-4 border-pink-200">
                        <div className="absolute -top-3 sm:-top-4 left-3 sm:left-5 w-6 sm:w-8 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute -top-3 sm:-top-4 right-3 sm:right-5 w-6 sm:w-8 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute top-8 sm:top-10 left-5 sm:left-7 w-6 sm:w-7 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute top-8 sm:top-10 right-5 sm:right-7 w-6 sm:w-7 h-6 sm:h-8 bg-black rounded-full"></div>
                        <div className="absolute top-9 sm:top-11 left-6 sm:left-8 w-3 sm:w-4 h-3 sm:h-4 bg-white rounded-full"></div>
                        <div className="absolute top-9 sm:top-11 right-6 sm:right-8 w-3 sm:w-4 h-3 sm:h-4 bg-white rounded-full"></div>
                        <div className="absolute top-16 sm:top-18 left-1/2 transform -translate-x-1/2 w-6 sm:w-8 h-3 sm:h-4 border-b-4 border-black rounded-full"></div>
                      </div>
                      <div className="w-20 sm:w-28 h-20 sm:h-24 bg-white rounded-2xl mx-auto -mt-2 shadow-xl border-4 border-pink-200"></div>
                    </div>
                  </div>
                </div>

                <div className="bg-gradient-to-r from-green-100 to-blue-100 p-4 sm:p-6 rounded-2xl sm:rounded-3xl shadow-2xl border-4 border-yellow-300 mb-4 sm:mb-6 mx-2">
                  <h1 className="text-2xl sm:text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-1 sm:mb-2">ðŸŽ‰ Friendship Restored! ðŸŽ‰</h1>
                  <p className="text-purple-700 text-sm sm:text-base md:text-lg">You're the best friend ever! Let's make more amazing memories together! ðŸŒˆ</p>
                </div>

                <button onClick={() => { setShowHearts(true); setTimeout(() => setShowHearts(false), 3000); }} className="w-full sm:w-auto px-8 sm:px-10 py-3 sm:py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-xl sm:rounded-2xl shadow-2xl transition-all transform hover:scale-105 sm:hover:scale-110 active:scale-95 border-4 border-white text-base sm:text-xl animate-pulse mx-2">
                  Best Friends Forever! ðŸ’•
                </button>

                {showHearts && (
                  <div className="fixed inset-0 pointer-events-none flex justify-center items-center overflow-hidden">
                    {[...Array(isMobile ? 12 : 25)].map((_, i) => {
                      const tx = Math.floor(Math.random() * 400 - 200);
                      const ty = Math.floor(Math.random() * 400 - 200);
                      return (
                        <div key={i} className="absolute text-3xl sm:text-4xl animate-heartExplode" style={{ left: '50%', top: '50%', animationDelay: `${i * 0.1}s`, '--tx': `${tx}px`, '--ty': `${ty}px` }}>
                          {['ðŸ’–','ðŸ’•','ðŸ’—','ðŸ’“','ðŸ’ž'][i % 5]}
                        </div>
                      );
                    })}
                  </div>
                )}
              </div>
            )}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<PandaApology />);
    </script>
  </body>
</html>